---
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';

const response = await fetch("http://localhost:4321/api/users");
const users = await response.json();
---


<Layout>
	<header class="border-b border-gray-200 pb-2 pt-2 mb-3">
		<div class="max-w-sm mx-auto flex items-center gap-3 text-gray-700 text-xs uppercase tracking-wide">
			<svg class="w-6 h-6 flex-shrink-0" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
				<circle cx="12" cy="12" r="10" stroke="#374151" stroke-width="1.2" fill="none" />
				<path d="M4 12h16" stroke="#374151" stroke-width="0.9" stroke-linecap="round" />
			</svg>
			<div class="leading-none">
				<div class="font-medium text-gray-900">U.S. Government</div>
				<div class="text-[10px] text-gray-600">Department of Public Services</div>
			</div>
		</div>
	</header>

	<div class="max-w-sm mx-auto mt-6">
		<h1 class="text-base text-center mb-3 font-medium text-gray-900">Usuarios</h1>

		<div class="px-2 mb-2">
			<a href="/create" class="w-full inline-block text-center bg-blue-800 hover:bg-blue-900 text-white py-1 text-sm font-medium">+ Agregar</a>
		</div>

		<div class="p-2">
			<ul class="divide-y divide-gray-200 text-sm">
				{users.map(user => (
					<li class="py-2 flex items-center justify-between">
						<span class="text-gray-800">{user.name}</span>
					</li>
				))}
			</ul>

			<div class="mt-2 text-xs text-gray-600 text-center">Total: {users.length}</div>
		</div>
	</div>

	<footer class="max-w-sm mx-auto mt-4 text-center text-xs text-gray-600 pb-4">
		<div>© {new Date().getFullYear()} Department of Public Services</div>
		<div class="mt-1">For official use — Public access</div>
	</footer>
</Layout>